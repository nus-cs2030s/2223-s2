
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://nus-cs2030s.github.io/2223-s2/labs/lab5-question.html">
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.1.6">
    
    
      
        <title>Lab 5: Maybe - CS2030S Programming Methodology II</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.ded33207.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.a0c5b2b5.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
      <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:400,700">
    
      <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&display=swap">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="deep-purple">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#lab-5-maybe" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../index.html" title="CS2030S Programming Methodology II" class="md-header__button md-logo" aria-label="CS2030S Programming Methodology II" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            CS2030S Programming Methodology II
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Lab 5: Maybe
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../index.html" title="CS2030S Programming Methodology II" class="md-nav__button md-logo" aria-label="CS2030S Programming Methodology II" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    CS2030S Programming Methodology II
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../index.html" class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
      
      
      
        <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
          Notes
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Notes
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../00-overview.html" class="md-nav__link">
        0. Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../01-compiler.html" class="md-nav__link">
        1. Program and Compiler
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../02-type.html" class="md-nav__link">
        2. Variable and Type
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../03-function.html" class="md-nav__link">
        3. Functions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../04-encapsulation.html" class="md-nav__link">
        4. Encapsulation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../05-infohiding.html" class="md-nav__link">
        5. Information Hiding
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../06-tell-dont-ask.html" class="md-nav__link">
        6. Tell, Don't Ask
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../07-static-field.html" class="md-nav__link">
        7. Class Fields
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../08-static-method.html" class="md-nav__link">
        8. Class Methods
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../09-composition.html" class="md-nav__link">
        9. Composition
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../10-heap-stack.html" class="md-nav__link">
        10. Heap and Stack
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../11-inheritance.html" class="md-nav__link">
        11. Inheritance
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../12-overriding.html" class="md-nav__link">
        12. Overriding
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../13-overloading.html" class="md-nav__link">
        13. Overloading
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../14-polymorphism.html" class="md-nav__link">
        14. Polymorphism
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../15-dynamic-binding.html" class="md-nav__link">
        15. Method Invocation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../16-lsp.html" class="md-nav__link">
        16. LSP
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../17-abstract.html" class="md-nav__link">
        17. Abstract Class
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../18-interface.html" class="md-nav__link">
        18. Interface
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../19-wrapper.html" class="md-nav__link">
        19. Wrapper Class
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../20-casting.html" class="md-nav__link">
        20. Casting
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../21-variance.html" class="md-nav__link">
        21. Variance
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../22-exception.html" class="md-nav__link">
        22. Exception
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../23-generics.html" class="md-nav__link">
        23. Generics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../24-erasure.html" class="md-nav__link">
        24. Type Erasure
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../25-unchecked.html" class="md-nav__link">
        25. Unchecked Warnings
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../26-wildcard.html" class="md-nav__link">
        26. Wildcards
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../27-inference.html" class="md-nav__link">
        27. Type Inference
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../28-immutability.html" class="md-nav__link">
        28. Immutability
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../29-nested-classes.html" class="md-nav__link">
        29. Nested Classes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../30-functions.html" class="md-nav__link">
        30. Side Effect-Free Programming
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../31-box-maybe.html" class="md-nav__link">
        31. Box and Maybe
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../32-lazy.html" class="md-nav__link">
        32. Lazy Evaluation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../33-infinitelist.html" class="md-nav__link">
        33. Infinite List
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../34-stream.html" class="md-nav__link">
        34. Streams in Java
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../35-logger.html" class="md-nav__link">
        35. Loggable
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../36-monad.html" class="md-nav__link">
        36. Monad
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../37-parallel.html" class="md-nav__link">
        37. Parallel Streams
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../38-thread.html" class="md-nav__link">
        38. Threads
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../39-async.html" class="md-nav__link">
        39. Asynchronous Programming
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../40-forkjoin.html" class="md-nav__link">
        40. Fork and Join
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
      
      
      
        <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
          Lab Guide
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Lab Guide
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../environments.html" class="md-nav__link">
        Programming Environments
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../github.html" class="md-nav__link">
        GitHub Setup
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
      
      
      
        <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
          Unix CLI
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_3">
          <span class="md-nav__icon md-icon"></span>
          Unix CLI
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../unix/background.html" class="md-nav__link">
        Background
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../unix/essentials.html" class="md-nav__link">
        Essentials
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../unix/advanced.html" class="md-nav__link">
        Advanced
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
      
      
      
        <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
          Vim
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_4">
          <span class="md-nav__icon md-icon"></span>
          Vim
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../vim/philosophy.html" class="md-nav__link">
        Background
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../vim/setup.html" class="md-nav__link">
        Setup
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../vim/quick-lessons.html" class="md-nav__link">
        Lessons
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../vim/tips.html" class="md-nav__link">
        Tips
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../vim/plugins.html" class="md-nav__link">
        Plugins
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
      
      
      
        <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
          Java Guide
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Java Guide
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../style.html" class="md-nav__link">
        Coding Style
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../javadoc.html" class="md-nav__link">
        JavaDoc
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="lab-5-maybe">Lab 5: Maybe</h1>
<ul>
<li>Deadline: 14 March, 2023, Tuesday, 23:59, SST</li>
<li>Marks: 12</li>
<li>Weightage: 3%</li>
</ul>
<h2 id="prerequisite">Prerequisite:</h2>
<ul>
<li>Caught up to Unit 29 of Lecture Notes</li>
<li>Familiar with the CS2030S Java style guide</li>
</ul>
<p>This is a follow-up from Lab 4.  In Lab 4, we have constructed a generic class <code>Box&lt;T&gt;</code>, which is a container for an item of type <code>T</code>.  Beyond being an exercise for teaching about generics, <code>Box&lt;T&gt;</code> is not a very useful type.  In Lab 5 and 6, we are going to modify <code>Box&lt;T&gt;</code> into two more useful and general classes.  We are going to build our own Java packages using these useful classes.</p>
<h2 id="java-package">Java <code>package</code></h2>
<p>Java package mechanism allows us to group relevant classes and interfaces under a namespace. You have seen two packages so far: <code>java.util</code>, where we import <code>List</code>, <code>Arrays</code>, from, and <code>java.lang</code> where we import the <code>Math</code> class from. These are provided by Java as standard libraries. We can also create our package and put the classes and interfaces into the same package. We (and the clients) can then import and use the classes and interfaces that we provide.</p>
<p>Java package provides a higher-layer of abstraction barrier.  We can designate a class to be used outside a package by prefixing the keyword <code>class</code> with the access modifier <code>public</code>.  We can further fine-tune which fields and methods are accessible from other classes in the same package using the <code>protected</code> access modifier.</p>
<p>You can read more about <a href="https://docs.oracle.com/javase/tutorial/java/package/index.html">java packages</a> and <a href="https://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html">the <code>protected</code> modifier</a> yourself through Oracle's Java tutorial.</p>
<p>We will create a package named <code>cs2030s.fp</code> to be used for this and the next few labs.  </p>
<p>First, we need to add the line:
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>package cs2030s.fp;
</code></pre></div></td></tr></table></div></p>
<p>on top of every <code>.java</code> file that we would like to include in the package.</p>
<p>The package name is typically written in a hierarchical manner using the "." notation. The name also indicates the location of the <code>.java</code> files and the <code>.class</code> files. For this reason, you can no longer store the <code>.java</code> files under <code>labX-username</code> directly. Instead, you should put them in a subdirectory called <code>cs2030s/fp</code> under <code>labX-username</code>.</p>
<p>To start, our <code>cs2030s.fp</code> package will contain the two interfaces <code>Transformer</code> and <code>BooleanCondition</code> that you have written in Lab 4.</p>
<p>If you have set up everything correctly, you should be able to run the following in <code>jshell</code> (Remember to always compile your code first!) from your <code>labX-username</code> directory:
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code>jshell&gt; import cs2030s.fp.Transformer;
jshell&gt; import cs2030s.fp.BooleanCondition;
</code></pre></div></td></tr></table></div></p>
<p>without error.</p>
<h2 id="more-interfaces">More Interfaces</h2>
<p>Now, we are going to add two more interfaces into our package:</p>
<ul>
<li><code>Producer&lt;T&gt;</code> is an interface with a single <code>produce</code> method that takes in no parameter and returns a value of type <code>T</code>.</li>
<li><code>Consumer&lt;T&gt;</code> is an interface with a single <code>consume</code> method that takes in a parameter of type <code>T</code> and returns nothing.</li>
</ul>
<p>If you have set up everything correctly, you should be able to run the following in <code>jshell</code> without errors (remember to always compile your code first!)</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><code>jshell&gt; import cs2030s.fp.Producer;
jshell&gt; import cs2030s.fp.Consumer;
jshell&gt; Producer&lt;String&gt; p;
jshell&gt; p = new Producer&lt;&gt;() {
   ...&gt;   public String produce() { return &quot;&quot;; }
   ...&gt; }
jshell&gt; Consumer&lt;Boolean&gt; c;
jshell&gt; c = new Consumer&lt;&gt;() {
   ...&gt;   public void consume(Boolean b) { }
   ...&gt; }
</code></pre></div></td></tr></table></div>
<h2 id="call-me-maybet">Call Me <code>Maybe&lt;T&gt;</code></h2>
<p>Now, we are going to implement a type called <code>Maybe&lt;T&gt;</code> in the <code>cs2030s.fp</code> package.  Our <code>Maybe&lt;T&gt;</code> is an <em>option type</em>, a common abstraction in programming languages (<code>java.util.Optional</code> in Java, <code>option</code> in Scala, <code>Maybe</code> in Haskell, <code>Nullable&lt;T&gt;</code> in C#, etc) that is a wrapper around a value that might be missing.  In other words, it represents either <em>some</em> value, or <em>none</em>.</p>
<h3 id="inner-classes-and-factory-methods">Inner Classes and Factory Methods</h3>
<p>Write an abstract class called <code>Maybe&lt;T&gt;</code> with two concrete, static, nested classes, named <code>None</code> and <code>Some&lt;T&gt;</code>.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><code>jshell&gt; import cs2030s.fp.Maybe;

jshell&gt; Maybe&lt;Object&gt; m = new Maybe&lt;&gt;();
|  Error:
|  cs2030s.fp.Maybe is abstract; cannot be instantiated
|  Maybe&lt;Object&gt; m = new Maybe&lt;&gt;();
|                    ^-----------^
</code></pre></div></td></tr></table></div>
<ul>
<li>Both <code>None</code> and <code>Some&lt;T&gt;</code> inherits from <code>Maybe&lt;T&gt;</code>.  Note that <code>None</code> is <em>not</em> a generic class so you need to specify <code>Object</code> as the type argument to <code>Maybe&lt;T&gt;</code>.</li>
<li><code>Some&lt;T&gt;</code> must be immutable.  </li>
<li>The types <code>None</code> and <code>Some&lt;T&gt;</code> are internal implementation details of <code>Maybe&lt;T&gt;</code> and must not be used directly.  For instance, clients must not be able to declare a variable of type <code>Maybe.Some&lt;T&gt;</code>.</li>
</ul>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div><pre><span></span><code>jshell&gt; Maybe.None m;
|  Error:
|  cs2030s.fp.Maybe.None is not public in cs2030s.fp.Maybe; cannot be accessed from outside package
|  Maybe.None m;
|  ^--------^

jshell&gt; Maybe.Some&lt;Object&gt; m;
|  Error:
|  cs2030s.fp.Maybe.Some is not public in cs2030s.fp.Maybe; cannot be accessed from outside package
|  Maybe.Some&lt;Object&gt; m;
|  ^--------^
</code></pre></div></td></tr></table></div>
<p><code>Maybe&lt;T&gt;</code> has two static factory methods:</p>
<ul>
<li><code>none()</code> returns an instance of <code>None</code>.  Just like <code>Box::empty</code>, there should only be one instance of <code>None</code>.  Multiple calls to <code>none()</code> should return the same instance.</li>
<li><code>some(T t)</code> takes in a value <code>t</code> and returns an instance of <code>Some&lt;T&gt;</code> wrapped around <code>t</code> (<code>t</code> might be <code>null</code>).</li>
</ul>
<p>Implement a <code>None::toString</code> method that always returns <code>[]</code> and a <code>Some::toString</code> methods that always return the string representation of the content between <code>[</code> and <code>]</code>.</p>
<p>Here are some examples of how the factory methods might be used (remember to always compile your code first!)
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span></pre></div></td><td class="code"><div><pre><span></span><code>jshell&gt; Maybe&lt;Object&gt; m = Maybe.none()
jshell&gt; Maybe.none()
$.. ==&gt; []

jshell&gt; Maybe&lt;Integer&gt; m = Maybe.some(null)
jshell&gt; Maybe.some(null)
$.. ==&gt; [null]

jshell&gt; Maybe&lt;Integer&gt; m = Maybe.some(4)
jshell&gt; Maybe.some(4)
$.. ==&gt; [4]

jshell&gt; Maybe.none() == Maybe.none()
$.. ==&gt; true
</code></pre></div></td></tr></table></div></p>
<p>Implement the <code>equal</code> method such that two <code>None</code> are always equal, and two <code>Some&lt;T&gt;</code> instances are equals if their contents are equals.  (You might find your <code>Box</code> implementation useful).</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span></pre></div></td><td class="code"><div><pre><span></span><code>jshell&gt; Maybe.none().equals(Maybe.none())
$.. ==&gt; true
jshell&gt; Maybe.none().equals(Maybe.some(&quot;day&quot;))
$.. ==&gt; false
jshell&gt; Maybe.none().equals(Maybe.some(null))
$.. ==&gt; false
jshell&gt; Maybe.none().equals(null)
$.. ==&gt; false

jshell&gt; Maybe.some(&quot;day&quot;).equals(Maybe.some(&quot;day&quot;))
$.. ==&gt; true

jshell&gt; Maybe.some(null).equals(Maybe.some(&quot;day&quot;))
$.. ==&gt; false
jshell&gt; Maybe.some(null).equals(Maybe.some(null))
$.. ==&gt; true
jshell&gt; Maybe.some(null).equals(Maybe.none())
$.. ==&gt; false
jshell&gt; Maybe.some(null).equals(null)
$.. ==&gt; false
</code></pre></div></td></tr></table></div>
<p>Finally, add a static factory <code>of</code>, which returns an instance of <code>Some</code> if the input is not null, and <code>None</code> otherwise.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><code>jshell&gt; Maybe.of(null).equals(Maybe.none())
$.. ==&gt; true
jshell&gt; Maybe.of(null).equals(Maybe.some(null))
$.. ==&gt; false
jshell&gt; Maybe.of(4).equals(Maybe.none())
$.. ==&gt; false
jshell&gt; Maybe.of(4).equals(Maybe.some(4))
$.. ==&gt; true
</code></pre></div></td></tr></table></div>
<p>Add a <code>protected</code> abstract method called <code>get()</code> with return type of <code>T</code> into <code>Maybe&lt;T&gt;</code>.  Implement <code>get()</code> in <code>None</code> such that it throws a <code>NoSuchElementException</code>, and in <code>Some&lt;T&gt;</code> such that it returns the value contained inside.  Since this method might throw an exception if the client misuse it, we keep the method <code>protected</code> and usable only within our <code>package</code>.  Due to this, we can't test it.  But keep this method in mind as it might be handy later.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><code>jshell&gt; Maybe.none().get()
|  Error:
|  get() has protected access in cs2030s.fp.Maybe
|  Maybe.none().get()
|  ^---------------^
jshell&gt; Maybe.some(0).get()
|  Error:
|  get() has protected access in cs2030s.fp.Maybe
|  Maybe.some(0).get()
|  ^---------------^
</code></pre></div></td></tr></table></div>
<p>You can test your code by running the <code>Test1.java</code> provided.  The following should compile without errors or warnings.  Make sure your code follows the CS2030S Java style.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code>$ javac -Xlint:rawtypes Test1.java
$ java Test1
$ java -jar ~cs2030s/bin/checkstyle.jar -c ~cs2030s/bin/cs2030_checks.xml cs2030s/fp/*.java
</code></pre></div></td></tr></table></div>
<h3 id="filter-and-map-again">Filter and Map (again!)</h3>
<p>We now add the methods <code>filter</code> and <code>map</code> to <code>Maybe&lt;T&gt;</code>.</p>
<p>Create an abstract method <code>filter</code> in <code>Maybe&lt;T&gt;</code> that takes in a <code>BooleanCondition&lt;..&gt;</code> (type parameter is omitted) as a parameter and implement this method in both <code>None</code> and <code>Some&lt;T&gt;</code>.</p>
<p>Calling <code>filter</code> on <code>None</code> always returns a <code>None</code>.  Call <code>filter</code> on <code>Some</code> should return <code>None</code> if the value in <code>Some</code> is not <code>null</code> and failed the test (i.e., the call to <code>test</code> returns <code>false</code>).  Otherwise, <code>filter</code> leaves the <code>Maybe</code> untouched and returns the <code>Maybe</code> as it is.</p>
<p>Here is how <code>filter</code> could be use.  Remember to always compile your code first before using them in <code>jshell</code>:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span></pre></div></td><td class="code"><div><pre><span></span><code>jshell&gt; import cs2030s.fp.BooleanCondition
jshell&gt; import cs2030s.fp.Maybe
jshell&gt;
jshell&gt; BooleanCondition&lt;Number&gt; isEven = new BooleanCondition&lt;&gt;() {
   ...&gt;   public boolean test(Number x) {
   ...&gt;     return x.shortValue() % 2 == 0;
   ...&gt;   }
   ...&gt; }
jshell&gt; Maybe.&lt;Integer&gt;none().filter(isEven)
$.. ==&gt; []
jshell&gt; Maybe.&lt;Integer&gt;some(null).filter(isEven)
$.. ==&gt; [null]
jshell&gt; Maybe.&lt;Integer&gt;some(1).filter(isEven)
$.. ==&gt; []
jshell&gt; Maybe.&lt;Integer&gt;some(2).filter(isEven)
$.. ==&gt; [2]
</code></pre></div></td></tr></table></div>
<p>Create an abstract method <code>map</code> in <code>Maybe&lt;T&gt;</code> that takes in a <code>Transformer&lt;...&gt;</code> (type parameter omitted) as a parameter.  Implement <code>map</code> in both <code>None</code> and <code>Some&lt;T&gt;</code>.</p>
<p>Calling <code>map</code> on <code>None</code> always returns a <code>None</code>.  Call <code>map</code> on <code>Some&lt;T&gt;</code> should return a new <code>Some&lt;T&gt;</code> with the value inside transformed by the <code>Transformer</code> instance.  Note that, if the <code>transform</code> method does not handle the case where the input is <code>null</code>, a <code>NullPointerException</code> will be thrown.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span></pre></div></td><td class="code"><div><pre><span></span><code>jshell&gt; Transformer&lt;Integer,Integer&gt; incr = new Transformer&lt;&gt;() {
   ...&gt;   public Integer transform(Integer x) {
   ...&gt;     return x + 1;
   ...&gt;   }
   ...&gt; }
jshell&gt; Maybe.&lt;Integer&gt;none().map(incr)
$.. ==&gt; []
jshell&gt; try {
   ...&gt;   Maybe.&lt;Integer&gt;some(null).map(incr); // &lt;- error expected
   ...&gt; } catch (NullPointerException e) {
   ...&gt;   System.out.println(e);
   ...&gt; }
java.lang.NullPointerException
jshell&gt; Maybe.&lt;Integer&gt;some(1).map(incr)
$.. ==&gt; [2]

jshell&gt; Map&lt;String,Integer&gt; map = Map.of(&quot;one&quot;, 1, &quot;two&quot;, 2);
jshell&gt; Transformer&lt;String,Maybe&lt;Integer&gt;&gt;  = new Transformer&lt;&gt;() {
   ...&gt;   public String transform(String x) {
   ...&gt;     return Maybe.some(map.get(x));
   ...&gt;   }
   ...&gt; }
jshell&gt; Map&lt;String,Integer&gt; map = Map.of(&quot;one&quot;, 1, &quot;two&quot;, 2);
jshell&gt; Transformer&lt;String,Integer&gt; wordToInt = new Transformer&lt;&gt;() {
   ...&gt;   public Integer transform(String x) {
   ...&gt;     return map.get(x);
   ...&gt;   }
   ...&gt; }
jshell&gt; Maybe.&lt;String&gt;none().map(wordToInt)
$.. ==&gt; []
jshell&gt; Maybe.&lt;String&gt;some(&quot;&quot;).map(wordToInt)
$.. ==&gt; [null]
jshell&gt; Maybe.&lt;String&gt;some(&quot;one&quot;).map(wordToInt)
$.. ==&gt; [1]

jshell&gt; Transformer&lt;String,Maybe&lt;Integer&gt;&gt; wordToMaybeInt = new Transformer&lt;&gt;() {
   ...&gt;   public Maybe&lt;Integer&gt; transform(String x) {
   ...&gt;     return Maybe.of(map.get(x));
   ...&gt;   }
   ...&gt; }
jshell&gt; Maybe.&lt;String&gt;none().map(wordToMaybeInt)
$.. ==&gt; []
jshell&gt; Maybe.&lt;String&gt;some(&quot;&quot;).map(wordToMaybeInt)
$.. ==&gt; [[]]
jshell&gt; Maybe.&lt;String&gt;some(&quot;one&quot;).map(wordToMaybeInt)
$.. ==&gt; [[1]]
jshell&gt; Maybe&lt;Maybe&lt;Integer&gt;&gt; m = Maybe.&lt;String&gt;some(&quot;one&quot;).map(wordToMaybeInt)

jshell&gt; Transformer&lt;Object,Integer&gt; toHashCode = new Transformer&lt;&gt;() {
   ...&gt;   public Integer transform(Object x) {
   ...&gt;     return x.hashCode();
   ...&gt;   }
   ...&gt; }
jshell&gt; Maybe&lt;Integer&gt; m = Maybe.&lt;String&gt;none().map(toHashCode)
$.. ==&gt; []
jshell&gt; Maybe&lt;Integer&gt; m = Maybe.&lt;String&gt;some(&quot;cs2030s&quot;).map(toHashCode)
$.. ==&gt; [1008560200]
</code></pre></div></td></tr></table></div>
<p>You can test your code by running the <code>Test2.java</code> provided.  The following should compile without errors or warnings.  Make sure your code follows the CS2030S Java style.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code>$ javac -Xlint:rawtypes Test2.java
$ java Test2
$ java -jar ~cs2030s/bin/checkstyle.jar -c ~cs2030s/bin/cs2030_checks.xml cs2030s/fp/*.java
</code></pre></div></td></tr></table></div>
<p>Remember to make your methods as flexible as it could be in the type that it accepts.</p>
<h3 id="flatmap">flatMap</h3>
<p>Consider a <code>Transformer</code> that might return a <code>Maybe&lt;T&gt;</code> itself (as <code>wordToMaybeInt</code> above).  Using <code>map</code> on such a <code>Transformer</code> would lead to a value wrapped around a <code>Maybe</code> twice.</p>
<p>Create a abstract method <code>flatMap</code> in <code>Maybe&lt;T&gt;</code> (and implements it in both <code>None</code> and <code>Some&lt;T&gt;</code>) that takes in a <code>Transfomer&lt;..&gt;</code> as the parameter.  The <code>Transformer</code> object transforms the value of type <code>T</code> in <code>Maybe&lt;T&gt;</code> into a value of type <code>Maybe&lt;U&gt;</code>, for some type <code>U</code>.  The method <code>flatMap</code>, however, returns a value of type <code>Maybe&lt;U&gt;</code> (instead of <code>Maybe&lt;Maybe&lt;U&gt;&gt;</code> as in the case of <code>map</code>).</p>
<p>Remember to apply PECS in your method signature so that <code>flatMap</code> is as flexible as possible.  We no longer explicitly test for it in our public test cases.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span></pre></div></td><td class="code"><div><pre><span></span><code>jshell&gt; Map&lt;String,Integer&gt; map = Map.of(&quot;one&quot;, 1, &quot;two&quot;, 2);
jshell&gt; Transformer&lt;String,Maybe&lt;Integer&gt;&gt; wordToMaybeInt = new Transformer&lt;&gt;() {
   ...&gt;   public Maybe&lt;Integer&gt; transform(String x) {
   ...&gt;     return Maybe.of(map.get(x));
   ...&gt;   }
   ...&gt; }
jshell&gt; Maybe.&lt;String&gt;none().flatMap(wordToMaybeInt)
$.. ==&gt; []
jshell&gt; Maybe.&lt;String&gt;some(&quot;&quot;).flatMap(wordToMaybeInt)
$.. ==&gt; []
jshell&gt; Maybe.&lt;String&gt;some(&quot;one&quot;).flatMap(wordToMaybeInt)
$.. ==&gt; [1]
jshell&gt; Maybe&lt;Number&gt; m = Maybe.&lt;String&gt;some(&quot;one&quot;).flatMap(wordToMaybeInt)
</code></pre></div></td></tr></table></div>
<p>You can test your code by running the <code>Test3.java</code> provided.  The following should compile without errors or warnings.  Make sure your code follows the CS2030S Java style.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code>$ javac -Xlint:rawtypes Test3.java
$ java Test3
$ java -jar ~cs2030s/bin/checkstyle.jar -c ~cs2030s/bin/cs2030_checks.xml cs2030s/fp/*.java
</code></pre></div></td></tr></table></div>
<h3 id="or-else">Or Else</h3>
<p>Since <code>Maybe</code> is an abstraction for a possibly missing value, it would be useful to provide methods that decide what to do if the value is missing.</p>
<p>Add an abstract method <code>orElse</code> in <code>Maybe&lt;T&gt;</code>.  Implement it in <code>None</code> and <code>Some&lt;T&gt;</code>, such that <code>None</code> returns a given value that is a subtype of <code>T</code>, while <code>Some&lt;T&gt;</code> just returns the value inside.  For example,</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code>jshell&gt; Maybe.&lt;Number&gt;none().orElse(4)
$.. ==&gt; 4
jshell&gt; Maybe.&lt;Integer&gt;some(1).orElse(4)
$.. ==&gt; 1
</code></pre></div></td></tr></table></div>
<p>Add an abstract method <code>orElseGet</code> in <code>Maybe&lt;T&gt;</code>.  <code>orElseGet</code> takes in a producer.  Implements <code>orElseGet</code> in <code>None</code> and <code>Some&lt;T&gt;</code>, such that <code>None</code> returns a value that is a subtype of <code>T</code> produced by the producer, while <code>Some&lt;T&gt;</code> just returns the value inside.  For example,</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><code>jshell&gt; Producer&lt;Double&gt; zero = new Producer&lt;&gt;() {
   ...&gt;   public Double produce() {
   ...&gt;     return 0.0;
   ...&gt;   }
   ...&gt; }
jshell&gt; Maybe.&lt;Number&gt;none().orElseGet(zero);
$.. ==&gt; 0.0
jshell&gt; Maybe.&lt;Number&gt;some(1).orElseGet(zero);
$.. ==&gt; 1
</code></pre></div></td></tr></table></div>
<p>Add an abstract method <code>ifPresent</code> in <code>Maybe&lt;T&gt;</code>.  <code>ifPresent</code> takes in a consumer.  Implements <code>ifPresent</code> in <code>None</code> and <code>Some&lt;T&gt;</code>, such that the given consumer does nothing for <code>None</code> and consumes the value inside for <code>Some&lt;T&gt;</code>.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span></pre></div></td><td class="code"><div><pre><span></span><code>jshell&gt; List&lt;Object&gt; list = new ArrayList&lt;&gt;();
jshell&gt; Consumer&lt;Object&gt; addToList = new Consumer&lt;&gt;() {
   ...&gt;   public void consume(Object o) {
   ...&gt;     list.add(o);
   ...&gt;   }
   ...&gt; }
jshell&gt; Maybe.&lt;Number&gt;none().ifPresent(addToList);
jshell&gt; list
list ==&gt; []
jshell&gt; Maybe.&lt;Number&gt;some(1).ifPresent(addToList);
jshell&gt; list
list ==&gt; [1]
</code></pre></div></td></tr></table></div>
<p>You can test your code by running the <code>Test4.java</code> provided.  The following should compile without errors or warnings.  Make sure your code follows the CS2030S Java style.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code>$ javac -Xlint:rawtypes Test4.java
$ java Test4
$ java -jar ~cs2030s/bin/checkstyle.jar -c ~cs2030s/bin/cs2030_checks.xml cs2030s/fp/*.java
</code></pre></div></td></tr></table></div>
<h2 id="using-maybe">Using <code>Maybe</code></h2>
<p>Now that we have our <code>Maybe</code> class, let's try to use it to do something more meaningful.</p>
<p>It is a common idiom (although not a good one) for a method to return a value if successful and return a <code>null</code> otherwise.  It is up to the caller to check and make sure that the return value is not <code>null</code> before using it, to prevent receiving a run-time <code>NullPointerException</code>.</p>
<p>One example of this is the <code>Map&lt;K,V&gt;</code> implements in Java.  You have seen above that <code>Map::get</code> returns <code>null</code> if the key that you are looking for does not exist.</p>
<p>We have given you a program <code>Lab5.java</code> that uses multiple layers of <code>Map</code> to store information about students, their modules, and their assessment grades.  There is a method <code>getGrade</code> that, given this map, a student, a module, and an assessment, look up the corresponding grade.  There are multiple checks if a returned value is <code>null</code> in this method.</p>
<p>Our new <code>Maybe&lt;T&gt;</code> class provides a good abstraction for the returned value from <code>Map::get</code> since the value returned is either some value or none!</p>
<p>Your final task is to modify <code>getGrade</code> so that it uses <code>Maybe&lt;T&gt;</code> instead:</p>
<ul>
<li>Declare and initialize two <code>Transformer</code> instances using anonymous classes.  </li>
<li>Use the two <code>Transformers</code>, <code>Maybe::of</code>, <code>Maybe::flatMap</code>, and <code>Maybe::orElse</code> to achieve the same functionality as the given <code>getGrade</code> in a <em>single return statement</em>.   In other words, your <code>getGrade</code> should consists of three Java statements: two to create two Transformers, and one <code>return</code> statement.   The skeleton has been given.</li>
<li>Your code should not have any more conditional statements or references to <code>null</code>.</li>
</ul>
<p>Compile your edited <code>Lab5</code> class.  The following should compile without errors or warnings.  Make sure your code follows the CS2030S Java style.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code>$ javac -Xlint:rawtypes Lab5.java
$ java Lab5
$ java -jar ~cs2030s/bin/checkstyle.jar -c ~cs2030s/bin/cs2030_checks.xml Lab5.java
</code></pre></div></td></tr></table></div>
<h2 id="files">Files</h2>
<p>A set of empty files have been given to you.  You should only edit these files.  You must not add any additional files.</p>
<p>The files <code>Test1.java</code>, <code>Test2.java</code>, etc., as well as <code>CS2030STest.java</code>, are provided for testing.  You can edit them to add your test cases, but they will not be submitted.</p>
<h2 id="following-cs2030s-style-guide">Following CS2030S Style Guide</h2>
<p>You should make sure that your code follows the <a href="https://nus-cs2030s.github.io/2223-s2/style.html">given Java style guide</a></p>
<h2 id="grading">Grading</h2>
<p>This lab is worth 12 marks and contributes 3% to your final grade.  The marking scheme is as follows:</p>
<ul>
<li>Style: 2 marks</li>
<li>Everything Else: 10 marks</li>
</ul>
<p>We will deduct 1 mark for each unnecessary use of <code>@SuppressWarnings</code> and each raw type.  <code>@SuppressWarnings</code> should be used appropriately and not abused to remove compilation warnings.</p>
<p>Note that the style marks are conditioned on the evidence of efforts in solving Lab 5.</p>
<h2 id="warning">WARNING </h2>
<p>We would like to remind you of the following:</p>
<ul>
<li>Use only the <code>submit-labX</code> script to submit your lab.  Failure to do so will lead to a 50% penalty on your lab grade.</li>
<li>The grace period for getting used to the submission system is over.  We will not waive the late penalty if students fail to submit properly.  Please check your repo after running <code>submit-labX</code> to ensure that your files have been added correctly. The URL to your repo is given after you run <code>submit-labX</code>.</li>
</ul>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright by Department of Computer Science, National University of Singapore 2023
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant", "toc.follow", "toc.integrate", "content.code.annotate", "content.code.copy"], "search": "../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.51198bba.min.js"></script>
      
        <script src="../javascripts/config.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
      
    
  </body>
</html>